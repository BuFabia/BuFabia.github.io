<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>basemap.at mit leaflet-hash Plugin</title>

    <link rel="stylesheet" href="js/leaflet/leaflet.css" />
	<link rel="stylesheet" href="js/leaflet-elevation/leaflet.elevation-0.0.4.css" />
	
    <script src="js/leaflet/leaflet.js"></script>
    <script src="js/leaflet-hash/leaflet-hash.js"></script>
	<script src="js/leaflet-elevation/leaflet.elevation-0.0.4.min.js"></script>
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>

</script>

    <style>
        body {
            padding: 0px;
            margin: 0px;
        }
        html, body, #map {
            height: 100vh;
            width: 100vw;
        }
    </style>
</head>

<body>
	<h3>Adlerweg-Etappe 1: St. Johann - Gaudeamushütte</h3>
	<p>Start im Ortszentrum von St. Johann in Tirol beim Tourismusbüro (ca. 250 Meter von Bahnhof entfernt). Wer mit dem Auto anreist hat die Möglichkeit auf dem öffentlichen Parkplatz (kostenlos) bei Koasastadion zu parken (ca. 400 Meter vom Tourismusbüro entfernt). Vom Tourismusbüro ausgehend geht man geradeaus Richtung Kreisverkehr zur Hauptstraße, dort biegt man bei der großen Hinweistafel Hinterkaiser ab und geht auf dem Hinterkaiserweg weiter in Richtung Rummlerhof. Vom Rummlerhof (Bauernhof mit angeschlossenem Wirtshaus) im St. Johanner Ortsteil Hinterkaiser auf schmalem, asphaltierten Fahrweg nach Westen Richtung „Haus Maurerhof“. Bald darauf der Beschilderung „Schleierwasserfall“ folgen. Links am (Bauern-)Haus Nr. 80 vorbei („Wasserfall, Nr.33“). Nun auf Weg bzw. Steig in den Wald und mäßig steil aufwärts. Es wird eine Forststraße überquert, jenseits der Forststraße dem Steig mit der rot-weißen Markierung folgen und den Bach entlang nach oben. Der Steig mündet in einen Forstweg – hier links und wenig später wieder rechts Richtung „Schleierwasserfall“ halten (bis zum Schleierwasserfall stets auf dem Weg Nr. 33 bleiben). Weiter durch den Wald und über den Steig (eine seilversicherte Stelle) nach Diebsöfen. Hier rinnt ein Bach unter einer Felswand vorbei, in der sich eine Höhle befindet. Hinunter ins Bachbett und den Markierungen in der Höhle folgen (Steig führt durch die Höhle durch). Von Diebsöfen auf dem Steig hinüber bzw. gemütlich nach oben zum Schleierwasser-fall („Zwickstelle Wasserfall“): Hier geht man zwischen Wasserfall und Felswand. Von hier auf dem Steig Richtung „Obere Regalm“ und ansteigend an Kletterwänden vorbei. Später vorbei an einem weiteren Wasserfall und über eine Wiese hinunter zu einer Steiggabelung – jetzt rechter Hand wieder nach oben (Nr. 817). Anschließend an „Regalm“ bzw. „Gaudeamushütte“ orientieren. Der Steig verläuft in dem Bereich im freien Almgebiet, in Folge erneut abwärts und später als Fahrweg hinüber zur Oberen Regalm („Zwickstelle Regalm“). Oberhalb der Hütte Richtung „Gaudeamushütte“ und auf dem Steig im freien Gelände zügig empor auf ein Joch (unmittelbar daneben Bergsteigergrab am Brennenden Palven). Jenseits des Sattels hinunter Richtung „Gaudeamushütte“. Der Steig leitet später unmittelbar vorbei an der Freiberghütte und recht zügig hinab zur Gaudeamushütte (Weg Nr. 35 ab dem Sattel).</p>
    <div id="map"></div>

    <script>
        // WMTS-Layer basemap.at - Quelle: http://www.basemap.at/wmts/1.0.0/WMTSCapabilities.xml
        var layers = {
            geolandbasemap: L.tileLayer("https://{s}.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmapgrau: L.tileLayer("https://{s}.wien.gv.at/basemap/bmapgrau/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmapoverlay: L.tileLayer("https://{s}.wien.gv.at/basemap/bmapoverlay/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmaphidpi: L.tileLayer("https://{s}.wien.gv.at/basemap/bmaphidpi/normal/google3857/{z}/{y}/{x}.jpeg", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmaporthofoto30cm: L.tileLayer("https://{s}.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            osm: L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                subdomains: ['a', 'b', 'c'],
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            })
        };

        // Karte definieren
        var map = L.map('map', {
            layers: [layers.geolandbasemap],
            center : [47.654, 13.370],
            zoom : 8
        });

        // Maßstab hinzufügen
        L.control.scale({
            maxWidth: 200,
            metric: true,
            imperial: false
        }).addTo(map);
		
		// Höhenprofil control hinzufügen
		var profileControl = L.control.elevation({
		    position : 'topright',
		    theme : 'steelblue-theme'
	    });
	    profileControl.addTo(map);

		// GPX Track laden
	    gpxTrack = omnivore.gpx('Data/AdlerwegEtappe01.gpx').addTo(map);
		
		// nach erfolgreichem Laden Popup hinzufügen, Ausschnitt setzen und Höhenprofil erzeugen
	    gpxTrack.on('ready', function () {
	    // Popup hinzufügen
	   var markup = '<h3>Adlerweg-Etappe 1: St. Johann - Gaudeamushütte</h3>';
	   markup += '<p>Die erste Etappe am Adlerweg führt vom St. Johanner Ortsteil Hinterkaiser zur Gaudeamushütte auf 1.263 Metern Seehöhe. Zei besondere Naturschauspiele entlang der Strecke sind der imposante Schleierwasserfall und die Höhle Diebsöfen.</p>'
	               markup += '<li>Ausgangspunkt: Rummlerhof</li>';
	               markup += '<li>Endpunkt: Gaudeamushütte</li>';
	               markup += '<li>Höhenmeter bergauf: 1060</li>';
	               markup += '<li>Höhenmeter bergab: 470</li>';
	               markup += '<li>Höchster Punkt: 1572</li>';
	               markup += '<li>Schwierigkeitsgrad: mittelschwierig</li>';
	               markup += '<li>Streckenlänge (in km): 9</li>';
	               markup += '<li>Gehzeit (in Stunden): 5,5</li>';
	               markup += '<li>Einkehrmöglichkeiten: Rummlerhof, Obere Regalm, Gaudeamushütte</li>';
	               markup += '<li><a href="http://www.tirol.at/reisefuehrer/sport/wandern/wandertouren/a-adlerweg-etappe-1-st-johann-gaudeamushuette">Weitere Infos</a></li>';
	               gpxTrack.bindPopup(markup, { maxWidth : 450 });
				
				 // Ausschnitt setzen
	               map.fitBounds(gpxTrack.getBounds());

	               // Höhenprofil erzeugen
	               gpxTrack.eachLayer(function(layer) {
	                   profileControl.addData(layer.feature);
	               });
	           });
			   
        // WMTS-Layer Auswahl hinzufügen
        var layerControl = L.control.layers({
            "basemap.at - STANDARD": layers.geolandbasemap,
            "basemap.at - GRAU": layers.bmapgrau,
            "basemap.at - OVERLAY": layers.bmapoverlay,
            "basemap.at - HIGH-DPI": layers.bmaphidpi,
            "basemap.at - ORTHOFOTO": layers.bmaporthofoto30cm,
            "OpenStreetMap": layers.osm,
        }).addTo(map);

        // leaflet-hash aktivieren
        var hash = new L.Hash(map);
		
		// Etappe laden
		//console.log(window.etappe01);
		
		//var etappe = omnivore.gpx('Data/AdlerwegEtappe01.gpx').addTo(map);
		
		//var el = L.control.elevation();
		//el.addTo(map);
		//L.geoJSON(window.etappe01, {
			//onEachFeature: el.addData.bind(el)
		//}).addTo(map);
		
		// Icons von https://mapicons.mapsmarker.com/
		/*var huts = L.icon({
	   			iconUrl: 'icons/cabin-2.png',
	   			iconAnchor: [16, 37]		
	   		});
		L.featureGroup ([ 
			L.marker([47.549263, 12.324513000000024], { title: "Gaudeamushütte", icon: huts }),
			L.marker([47.546639, 12.344426999999996], { title: "Obere Regalm", icon: huts }),
			L.marker([47.5380297, 12.397733099999982], {title: "Rummlerhof", icon: huts })
		]);	*/
		var huts = L.icon({
	   			iconUrl: 'icons/cabin-2.png',
	   			iconAnchor: [16, 37]		
	   		});
	   		L.featureGroup([
	   			L.marker ([47.549263, 12.324513000000024], { title: "Gaudeamushütte", icon: huts } ),
	   			L.marker ([47.546639, 12.344426999999996], { title: "Obere Regalm", icon: huts} ),
				L.marker ([47.5380297, 12.397733099999982], { title: "Rummlerhof", icon: huts} )
	   		]).addTo(map);
			
		var start = L.icon({
	   			iconUrl: 'icons/hiking.png',
	   			iconAnchor: [16, 37]
	   		});
	   	L.marker([47.51988, 12.43071], { title: "Start Etappe 01", icon: start}).addTo(map);
			
		var end = L.icon({
	   			iconUrl: 'icons/finish.png',
	   			iconAnchor: [16, 37]
	   		});
	   	L.marker([47.54914, 12.32456], { title: "Ziel Etappe 01", icon: end}).addTo(map);	
			
		var hutsLayer = L.featureGroup();
		for (var i=0; i<huts.length; i++) {
			hutsLayer.addLayer(huts[i]);
		}
		//hutsLayer.addTo(map);
		map.on("zoomend", function() {
			if (map.getZoom() >= 15) {
				map.addLayer(hutsLayer);
			} else {
				map.removeLayer(hutsLayer);
			}
		});
		
		
    </script>
<h4><a href="https://github.com/bufabia">Autorin: Fabia Buchner</a></h4>
</body>

</html>